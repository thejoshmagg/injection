<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jessica's GLP-1 Injection Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .icon {
            width: 20px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
        }
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: #e5e7eb;
            outline: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
        }
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: none;
        }
    </style>
</head>
<body>
    <div id="root" class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Jessica's GLP-1 Injection Tracker</h1>
                        <p class="text-gray-600">Track your injections and monitor your progress</p>
                    </div>
                    <button onclick="showAddForm()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl flex items-center gap-2 transition-colors shadow-lg">
                        <span class="icon">+</span>
                        Add Injection
                    </button>
                </div>
            </div>

            <!-- Weekly Summary -->
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-800 flex items-center gap-2">
                        <span class="icon">üìà</span>
                        Week <span id="currentWeek">1</span> Summary
                    </h2>
                    <div class="flex gap-2">
                        <button onclick="changeWeek(-1)" class="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-lg text-sm transition-colors">
                            Previous
                        </button>
                        <button onclick="changeWeek(1)" class="px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-lg text-sm transition-colors">
                            Next
                        </button>
                    </div>
                </div>
                
                <div id="weeklyStats" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-blue-50 p-4 rounded-xl">
                        <div class="text-2xl font-bold text-blue-600" id="weekCount">0</div>
                        <div class="text-sm text-gray-600">Injections</div>
                    </div>
                    <div class="bg-green-50 p-4 rounded-xl">
                        <div class="text-2xl font-bold text-green-600" id="avgMood">0/10</div>
                        <div class="text-sm text-gray-600">Avg Mood</div>
                    </div>
                    <div class="bg-purple-50 p-4 rounded-xl">
                        <div class="text-2xl font-bold text-purple-600" id="avgAppetite">0/10</div>
                        <div class="text-sm text-gray-600">Avg Appetite</div>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-xl">
                        <div class="text-2xl font-bold text-orange-600" id="avgEnergy">0/10</div>
                        <div class="text-sm text-gray-600">Avg Energy</div>
                    </div>
                </div>
                <div id="noDataMessage" class="text-gray-500 text-center py-8 hidden">
                    No injections recorded for this week yet
                </div>
            </div>

            <!-- Add/Edit Form -->
            <div id="injectionForm" class="bg-white rounded-2xl shadow-xl p-6 mb-6 hidden">
                <h2 class="text-xl font-semibold text-gray-800 mb-4" id="formTitle">Add New Injection</h2>
                <div class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                            <input type="date" id="injectionDate" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Time</label>
                            <input type="time" id="injectionTime" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Injection Site</label>
                            <select id="injectionLocation" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                <option value="">Select injection site</option>
                                <option value="Abdomen (left side)">Abdomen (left side)</option>
                                <option value="Abdomen (right side)">Abdomen (right side)</option>
                                <option value="Thigh (left)">Thigh (left)</option>
                                <option value="Thigh (right)">Thigh (right)</option>
                                <option value="Upper arm (left)">Upper arm (left)</option>
                                <option value="Upper arm (right)">Upper arm (right)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Dosage</label>
                            <input type="text" id="injectionDosage" placeholder="e.g., 0.25mg, 0.5mg, 1mg" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Side Effects</label>
                        <select id="sideEffects" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="None">None</option>
                            <option value="Nausea">Nausea</option>
                            <option value="Vomiting">Vomiting</option>
                            <option value="Diarrhea">Diarrhea</option>
                            <option value="Constipation">Constipation</option>
                            <option value="Headache">Headache</option>
                            <option value="Fatigue">Fatigue</option>
                            <option value="Decreased appetite">Decreased appetite</option>
                            <option value="Injection site reaction">Injection site reaction</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Mood (1-10)</label>
                            <input type="range" id="moodSlider" min="1" max="10" value="5" class="slider" oninput="updateSliderValue('mood', this.value)">
                            <div class="text-center text-sm text-gray-600" id="moodValue">5/10</div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Appetite (1-10)</label>
                            <input type="range" id="appetiteSlider" min="1" max="10" value="5" class="slider" oninput="updateSliderValue('appetite', this.value)">
                            <div class="text-center text-sm text-gray-600" id="appetiteValue">5/10</div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Energy (1-10)</label>
                            <input type="range" id="energySlider" min="1" max="10" value="5" class="slider" oninput="updateSliderValue('energy', this.value)">
                            <div class="text-center text-sm text-gray-600" id="energyValue">5/10</div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                        <textarea id="injectionNotes" placeholder="Any additional notes about how you felt, effectiveness, etc." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="3"></textarea>
                    </div>

                    <div class="flex gap-3">
                        <button onclick="saveInjection()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors">
                            <span class="icon">üíæ</span>
                            <span id="saveButtonText">Save Injection</span>
                        </button>
                        <button onclick="cancelForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors">
                            <span class="icon">‚úï</span>
                            Cancel
                        </button>
                    </div>
                </div>
            </div>

            <!-- Injection History -->
            <div class="bg-white rounded-2xl shadow-xl p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Injection History</h2>
                <div id="injectionHistory" class="space-y-4">
                    <p class="text-gray-500 text-center py-8">No injections recorded yet. Add your first injection above!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let injections = [];
        let currentWeek = getWeekNumber(new Date());
        let editingId = null;

        function getWeekNumber(date) {
            const startOfYear = new Date(date.getFullYear(), 0, 1);
            const pastDaysOfYear = (date - startOfYear) / 86400000;
            return Math.ceil((pastDaysOfYear + startOfYear.getDay() + 1) / 7);
        }

        function showAddForm() {
            document.getElementById('injectionForm').classList.remove('hidden');
            document.getElementById('formTitle').textContent = 'Add New Injection';
            document.getElementById('saveButtonText').textContent = 'Save Injection';
            resetForm();
        }

        function resetForm() {
            const now = new Date();
            document.getElementById('injectionDate').value = now.toISOString().split('T')[0];
            document.getElementById('injectionTime').value = now.toTimeString().slice(0, 5);
            document.getElementById('injectionLocation').value = '';
            document.getElementById('injectionDosage').value = '';
            document.getElementById('sideEffects').value = 'None';
            document.getElementById('moodSlider').value = '5';
            document.getElementById('appetiteSlider').value = '5';
            document.getElementById('energySlider').value = '5';
            document.getElementById('injectionNotes').value = '';
            updateSliderValue('mood', '5');
            updateSliderValue('appetite', '5');
            updateSliderValue('energy', '5');
            editingId = null;
        }

        function updateSliderValue(type, value) {
            document.getElementById(type + 'Value').textContent = value + '/10';
        }

        function saveInjection() {
            const date = document.getElementById('injectionDate').value;
            const time = document.getElementById('injectionTime').value;
            const location = document.getElementById('injectionLocation').value;
            const dosage = document.getElementById('injectionDosage').value;

            if (!date || !time || !location || !dosage) {
                alert('Please fill in all required fields.');
                return;
            }

            const injection = {
                id: editingId || Date.now(),
                date: date,
                time: time,
                location: location,
                dosage: dosage,
                sideEffects: document.getElementById('sideEffects').value,
                mood: parseInt(document.getElementById('moodSlider').value),
                appetite: parseInt(document.getElementById('appetiteSlider').value),
                energy: parseInt(document.getElementById('energySlider').value),
                notes: document.getElementById('injectionNotes').value,
                week: getWeekNumber(new Date(date)),
                timestamp: new Date().toISOString()
            };

            if (editingId) {
                const index = injections.findIndex(inj => inj.id === editingId);
                injections[index] = injection;
            } else {
                injections.push(injection);
            }

            cancelForm();
            updateDisplay();
        }

        function cancelForm() {
            document.getElementById('injectionForm').classList.add('hidden');
            editingId = null;
        }

        function editInjection(id) {
            const injection = injections.find(inj => inj.id === id);
            if (!injection) return;

            document.getElementById('injectionDate').value = injection.date;
            document.getElementById('injectionTime').value = injection.time;
            document.getElementById('injectionLocation').value = injection.location;
            document.getElementById('injectionDosage').value = injection.dosage;
            document.getElementById('sideEffects').value = injection.sideEffects;
            document.getElementById('moodSlider').value = injection.mood;
            document.getElementById('appetiteSlider').value = injection.appetite;
            document.getElementById('energySlider').value = injection.energy;
            document.getElementById('injectionNotes').value = injection.notes;
            
            updateSliderValue('mood', injection.mood);
            updateSliderValue('appetite', injection.appetite);
            updateSliderValue('energy', injection.energy);

            editingId = id;
            document.getElementById('injectionForm').classList.remove('hidden');
            document.getElementById('formTitle').textContent = 'Edit Injection';
            document.getElementById('saveButtonText').textContent = 'Update Injection';
        }

        function deleteInjection(id) {
            if (confirm('Are you sure you want to delete this injection?')) {
                injections = injections.filter(inj => inj.id !== id);
                updateDisplay();
            }
        }

        function changeWeek(direction) {
            currentWeek += direction;
            if (currentWeek < 1) currentWeek = 1;
            updateDisplay();
        }

        function updateDisplay() {
            document.getElementById('currentWeek').textContent = currentWeek;
            updateWeeklyStats();
            updateHistory();
        }

        function updateWeeklyStats() {
            const weekInjections = injections.filter(inj => inj.week === currentWeek);
            
            if (weekInjections.length === 0) {
                document.getElementById('weeklyStats').classList.add('hidden');
                document.getElementById('noDataMessage').classList.remove('hidden');
                return;
            }

            document.getElementById('weeklyStats').classList.remove('hidden');
            document.getElementById('noDataMessage').classList.add('hidden');

            const avgMood = weekInjections.reduce((sum, inj) => sum + inj.mood, 0) / weekInjections.length;
            const avgAppetite = weekInjections.reduce((sum, inj) => sum + inj.appetite, 0) / weekInjections.length;
            const avgEnergy = weekInjections.reduce((sum, inj) => sum + inj.energy, 0) / weekInjections.length;

            document.getElementById('weekCount').textContent = weekInjections.length;
            document.getElementById('avgMood').textContent = avgMood.toFixed(1) + '/10';
            document.getElementById('avgAppetite').textContent = avgAppetite.toFixed(1) + '/10';
            document.getElementById('avgEnergy').textContent = avgEnergy.toFixed(1) + '/10';
        }

        function updateHistory() {
            const historyDiv = document.getElementById('injectionHistory');
            
            if (injections.length === 0) {
                historyDiv.innerHTML = '<p class="text-gray-500 text-center py-8">No injections recorded yet. Add your first injection above!</p>';
                return;
            }

            const sortedInjections = [...injections].sort((a, b) => 
                new Date(b.date + 'T' + b.time) - new Date(a.date + 'T' + a.time)
            );

            historyDiv.innerHTML = sortedInjections.map(injection => `
                <div class="border border-gray-200 rounded-xl p-4 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex items-center gap-4">
                            <div class="bg-blue-100 p-2 rounded-lg">
                                <span class="icon text-blue-600">üìÖ</span>
                            </div>
                            <div>
                                <div class="font-medium text-gray-800">
                                    ${new Date(injection.date).toLocaleDateString()} at ${injection.time}
                                </div>
                                <div class="text-sm text-gray-600">Week ${injection.week}</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="editInjection(${injection.id})" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors">
                                ‚úèÔ∏è
                            </button>
                            <button onclick="deleteInjection(${injection.id})" class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-3">
                        <div class="flex items-center gap-2">
                            <span class="icon text-gray-400">üìç</span>
                            <span class="text-sm text-gray-600">${injection.location}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="icon text-red-400">üíâ</span>
                            <span class="text-sm text-gray-600">${injection.dosage}</span>
                        </div>
                        <div class="text-sm text-gray-600">
                            Mood: ${injection.mood}/10
                        </div>
                        <div class="text-sm text-gray-600">
                            Appetite: ${injection.appetite}/10
                        </div>
                    </div>
                    
                    ${injection.sideEffects && injection.sideEffects !== 'None' ? `
                        <div class="mb-2">
                            <span class="text-sm font-medium text-gray-700">Side Effects: </span>
                            <span class="text-sm text-orange-600">${injection.sideEffects}</span>
                        </div>
                    ` : ''}
                    
                    ${injection.notes ? `
                        <div class="bg-gray-50 p-3 rounded-lg">
                            <span class="text-sm font-medium text-gray-700">Notes: </span>
                            <span class="text-sm text-gray-600">${injection.notes}</span>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplay();
        });
    </script>
</body>
</html>
